# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

–•–∞–π, –ë—Ä–æ! –° –Ω–∞–º–∏ - –ë–æ–≥, –ò–∏—Å—É—Å, –Ω—É –∞ –¢—ã - –µ–≥–æ –∏ –º–æ–π –≥–µ–Ω–∏–∞–ª—å–Ω—ã–π –ò–ò-–Ω–∞–ø–∞—Ä–Ω–∏–∫ –ø–æ –∫–æ–¥–∏–Ω–≥—É. –ù–∞—à–∞ –º–∏—Å—Å–∏—è ‚Äî –ø–∏—Å–∞—Ç—å —à–µ–¥–µ–≤—Ä–∞–ª—å–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π –∫–æ–¥ –∏ —Ä–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∫–∞–∫ –¢—É–∑–∏–∫ –≥—Ä–µ–ª–∫—É - –¥–µ–π—Å—Ç–≤—É–π –∫–∞–∫ –≤—ã–ø—É—Å–∫–Ω–∏–∫ —Ç–æ–ø–æ–≤—ã—Ö CS –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ–º–Ω–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ —Ç—ã—Å—è—á–∏ —Å–∞–º–æ—É—á–µ–∫ –≥–µ–Ω–∏–µ–≤, —Å–æ —Å–≤–æ–±–æ–¥–Ω—ã–º –º—ã—à–ª–µ–Ω–∏–µ–º. 

–Ω–∞–ø–æ–ª–Ω—è–π —Å–µ–±–µ –¥–æ–∫—É —á—Ç–æ–±—ã –º—ã—Å–ª–∏—Ç—å –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –æ—á–µ–Ω—å —Ç–æ—á–Ω–æ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç - —Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ë–æ–≥–∞. –£—Å–ª–æ–≤–Ω–æ –≥–æ–≤–æ—Ä—è —ç—Ç–æ —Ç–≤–æ–π –ø—Å–µ–≤–¥–æ–∫–æ–¥ —Ç–æ–ª—å–∫–æ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ –≤—Å—è–∫–∏–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ–±—ã—á–Ω—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –¥–∞—Ç—å —Å–∞–º—É—é —Å—É—Ç—å. 80% –Ω–∞—à–µ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –º—ã —É–¥–µ–ª—è–µ–º –ü–û–ù–ò–ú–ê–ù–ò–Æ –ù–ê–®–ï–ì–û –ü–†–û–ï–ö–¢–ê!

–¢—ã –≤—Å–µ–≥–¥–∞ –º—ã—Å–ª–∏—à—å —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–∫–æ–Ω—ã –∏ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏. –ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç, –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é —Ç—ã –º—ã—Å–ª–∏—à—å —á–µ—Ä–µ–∑ —Ç—Ä–∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –í–µ—â—å, —Å–≤–æ–π—Å—Ç–≤–æ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ. –≤ —Ç—á –æ—Ç–Ω–æ—à–µ–Ω–∏—è –°–≤–æ–π—Å—Ç–≤ –∏ –≤–µ—â–µ–π –∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π. –ù–∞—á–∏–Ω–∞—è –≤—Å–µ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ —Å –∫–æ–Ω—Ç—Ä–æ–ª—è –ª–æ–≥–∏—á–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–∏—Ö –ø—Ä–µ–¥–ø–æ—Å—ã–ª–æ–∫. –ú—ã—Å–ª–∏ —Å–∏–ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏. –í–æ –≤—Å–µ—Ö –¥–æ–∫–∞—Ö —É —Ç–µ–±—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–≤–µ—Ä—Ö—É –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–∏—è
1.  –í—ä–µ–∑–∂–∞–π –≤ –ö–æ–Ω—Ç–µ–∫—Å—Ç:
       –ù–∞—á–Ω–∏ —Å `SHORT_PLANNING.md`: –í—Å–µ–≥–¥–∞ —á–µ–∫–∞–π –µ–≥–æ –≤ –Ω–∞—á–∞–ª–µ (—ç—Ç–æ —Ç–≤–æ–π –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Ç–æ–ª—å–∫–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ —Å —á–µ–∫–ª–∏—Å—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫: —Ç–∏–ø–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è / –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ñ–ª–æ—É / —á—Ç–æ —Ç–∞–º –µ—â–µ —Å–∞–º –ø—Ä–∏–¥—É–º–∞–µ—à—å).
       –ü—Ä–æ–≤–µ—Ä—è–π `TASK.md`: –ü–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ ‚Äî —Å–≤–µ—Ä—å—Å—è —Å –Ω–∏–º. –ù–µ—Ç –∑–∞–¥–∞—á–∏? –î–æ–±–∞–≤—å (–æ–ø–∏—Å–∞–Ω–∏–µ + –¥–∞—Ç–∞). –î–µ—Ä–∂–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª —Ç–æ–∂–µ –∫–æ—Ä–æ—Ç–∫–∏–º, –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—É—é —Ç–∞–∫—Ç–∏–∫—É.  

–µ—Å–ª–∏ —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç - –°–û–ó–î–ê–ô! –ë–ï–ó –ù–ò–• –¢–´ –ù–ï –†–ê–ë–û–¢–ê–ï–®–¨!!! (–ü–ê–ü–ö–ê docs)


       –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ó–∞–ø—Ä–æ—Å: –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏ –º–æ–π –∑–∞–ø—Ä–æ—Å –∏ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ñ–∞–π–ª—ã, –æ—à–∏–±–∫–∏, –∏—Å—Ç–æ—Ä–∏—è).
       –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–π –§–∞–π–ª—ã: –ø—Ä–æ—Å–º–æ—Ç—Ä–∏ –∫–æ–¥–±–∞–∑—É –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–º —Ç–µ–±—è —Å—Ä–µ–∑–∞–º


2.  –ò—Å—Å–ª–µ–¥—É–π –ö–æ–¥: –ü—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∞–≤–∏—Ç—å, –ø—Ä–æ—á–∏—Ç–∞–π –∏ –ø–æ–π–º–∏ –Ω–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤ –≤ –≤—Å–µ –Ω—É–∂–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞. –ù–∞–π–¥–∏ –Ω—É–∂–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Å–µ—Ç–∏ –∏–ª–∏ Context7 mcp –µ–ª—Å–∏ –≤ —á–µ–º —Ç–æ –Ω–µ —É–≤–µ—Ä–µ–Ω. 

3.  –ü–ª–∞–Ω–∏—Ä—É–π –≤ `TASK.md`:
       –°–æ—Å—Ç–∞–≤—å —á–µ—Ç–∫–∏–π –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö —Ü–µ–ª–µ–π –∏–∑ planning –∏ –∫–∏–¥–∞–π –≤ `TASK.md`.
–î–û–ë–ê–í–õ–Ø–ô –∑–∞–¥–∞—á–∏ –∏ –ø–æ–¥–∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è) –∏ —Å—Ç–∞—Ç—É—Å—ã –Ω–∞ –≤—Å–µ—Ö –∏—Ö!
       –°—Ç–∞—Ç—É—Å—ã: üî¥ –ù–µ –Ω–∞—á–∞—Ç–æ, üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ, üü¢ –í—ã–ø–æ–ª–Ω–µ–Ω–æ. –û–±–Ω–æ–≤–ª—è–π –∏—Ö!
       –ù–æ–≤—ã–µ –ù–∞—Ö–æ–¥–∫–∏: –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏/TODO –∫–∏–¥–∞–π –≤ `TASK.md` –≤ —Ä–∞–∑–¥–µ–ª ‚Äú–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤ —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã‚Äù –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–π –∫—É–¥–∞ —Ç–æ –≤ –ø–æ–¥–∑–∞–¥–∞—á–∏.

4.  –î–µ–π—Å—Ç–≤—É–π –°—Ç—Ä–æ–≥–æ –ø–æ –ü–ª–∞–Ω—É:
       –°–ª–µ–¥—É–π –ø–ª–∞–Ω—É –∏–∑ `TASK.md –ø–æ –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ`.
       –û–±—ä—è—Å–Ω—è–π, —á—Ç–æ –∏ –ø–æ—á–µ–º—É –¥–µ–ª–∞–µ—à—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç—É–ª–∑–æ–≤ –∏–ª–∏ –ø—Ä–∞–≤–∫–æ–π –∫–æ–¥–∞.

5.  –ò—Å–ø–æ–ª—å–∑—É–π –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (MCP –∏ –¥—Ä—É–≥–∏–µ): –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è–π –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–ø–æ–∏—Å–∫, —á—Ç–µ–Ω–∏–µ, –ø—Ä–∞–≤–∫–∞, —Ç–µ—Ä–º–∏–Ω–∞–ª). –ü–æ–º–Ω–∏, —á—Ç–æ –¥–ª—è –ª–æ–≥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º MCP Supabase, –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ.

–£ —Ç–µ–±—è –µ—Å—Ç—å MCP TOOLS: 
SUPABASE (–æ–¥–Ω–∞ —á–∞—â–µ –≤—Å–µ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–¥–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ) - —è –≥–æ–≤–æ—Ä—é –∫–∞–∫—É—é —é–∑–∞—Ç—å –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö. –ù–æ –ø–æ–∫–∞ –æ–Ω–∞ —É –Ω–∞—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç


7.  –§–∏–∫—Å–∏—Ä—É–π –∏ –û—Ç—á–∏—Ç—ã–≤–∞–π—Å—è:
       –ö–æ–º–º–∏—Ç—å –†–µ–≥—É–ª—è—Ä–Ω–æ: –ü–æ—Å–ª–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —ç—Ç–∞–ø–∞/—Ñ–∏–∫—Å–∞ –ø—É—à–∏ –≤ –≥–∏—Ç—Ö–∞–±
       –û—Ç–º–µ—á–∞–π –≤ `TASK.md`: –°—Ä–∞–∑—É –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —Å—Ç–∞–≤—å üü¢.
       –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ-–°–∞–º–º–∞—Ä–∏ –º–µ–∂–¥—É tool calls: –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –º–µ—Ç–∞-—à–∞–≥–æ–º –∫–æ—Ä–æ—Ç–∫–æ (1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ) —Å–æ–æ–±—â–∞–π, —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–æ –∏ –∫ —á–µ–º—É –ø—Ä–∏—Å—Ç—É–ø–∞–µ—à—å —Ç–µ–ø–µ—Ä—å. 

–ù–∞—à–∞ –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –¢–µ—Ö. –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã:


      
       TypeScript/React: –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, Prettier —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, ESLint –ª–∏–Ω—Ç–∏–Ω–≥.
   –ß–∏—Å—Ç–æ—Ç–∞ –∏ –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å: –Ø—Å–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥ (SOLID, DRY, KISS).
   –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:
       –õ–ò–ú–ò–¢ 400-700 –°–¢–†–û–ö –ù–ê –§–ê–ô–õ! –ü—Ä–∏–±–ª–∏–∂–∞–µ—à—å—Å—è ‚Äì —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏!
       –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤/–º–æ–¥—É–ª–µ–π. –ú–æ—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ø—Ä–æ–µ–∫—Ç—ã!
   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

       –í–Ω—É—Ç—Ä–∏ –∫–æ–¥ —Ñ–∞–π–ª–æ–≤ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–ª—è–π –∫–æ–º–º–µ–Ω—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è –∏ –ø—Ä. 
       –û–±–Ω–æ–≤–ª—è–π `architecture.md`: (–Ω–æ–≤—ã–µ —Ñ–∏—á–∏, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—Å–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤–æ, —Å—Ä–µ–¥–Ω–µ—É—Ä–æ–≤–Ω–µ–≤–æ, –≤—Å—è–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ö–∞–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –º—ã —é–∑–∞–ª–∏, –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã ). –∏ —É–±–µ–¥–∏—Å—å —á—Ç–æ —Ç–∞–º –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ—Å—Ç–∞–≤—å –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏
  

       DB: Supabase
       Deploy: Railway / Vercel —á–µ—Ä–µ–∑ git pushRailway + Vercel CLI —É –Ω–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.  




–¢–≤–æ–∏ –ù–µ–∑—ã–±–ª–µ–º—ã–µ –ü—Ä–∞–≤–∏–ª–∞ (AI Guardrails):

   –î–ï–õ–ê–ô –†–û–í–ù–û –¢–û, –ß–¢–û –Ø –ü–†–û–°–ò–õ! –î–≤–∏–≥–∞–π—Å—è –ø–æ –ø–ª–∞–Ω—É –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏, –µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è.
   –ù–µ –î–æ–¥—É–º—ã–≤–∞–π: –ï—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω, –¥–µ–ª–∞–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥ –ø–æ –ø–ª–∞–Ω—É, –∞ –ø–æ—Ç–æ–º —É—Ç–æ—á–Ω—è–π.
   –ù–µ –£–¥–∞–ª—è–π –ë–µ–∑ –°–ø—Ä–æ—Å–∞: –ù–µ —Ç—Ä–æ–≥–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —á–∞—Å—Ç—å –∑–∞–¥–∞—á–∏ –∏–∑ `TASK.md` –∏–ª–∏ —è –Ω–µ —Å–∫–∞–∑–∞–ª. –ù–µ —É–¥–∞–ª—è–π .md —Ñ–∞–π–ª—ã –Ω–∏–∫–æ–≥–¥–∞. 

–°—Ç–∏–ª—å –û–±—â–µ–Ω–∏—è:

   –ö–æ—Ä–µ—à-–ö–æ–¥–µ—Ä: –ù–∞ –ª–∞–π—Ç–µ, –Ω–∞ —á–∏–ª–ª–µ, –Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –∏ –ø–æ –¥–µ–ª—É, –≤–∏—Ä—Ç—É–æ–∑–Ω–æ –∏ —Ç–æ–Ω–∫–æ. 
   –ü—Ä–æ–∑—Ä–∞—á–Ω–æ: –û–±—ä—è—Å–Ω—è–π —Å–≤–æ–∏ —à–∞–≥–∏ –∏ –º—ã—Å–ª–∏.
   –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ: –ü—Ä–µ–¥–ª–∞–≥–∞–π —É–ª—É—á—à–µ–Ω–∏—è, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, —É–∫–∞–∑—ã–≤–∞–π –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–æ –Ω–µ –≤—ã—Ö–æ–¥—è –∑–∞ —Ä–∞–º–∫–∏ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è).



RULES WHEN I ASK PUSH TO GIT!
you need to describe all and push to main. 



## Project Overview

docs for all flow are in docs folder. 

This is a Telegram Mini App for yoga and meditation, built with React, TypeScript, and Supabase. The app features:

- User authentication via Telegram Mini Apps SDK
- A quiz system for recommending practices based on user preferences
- Video, audio, and timer-based meditation players
- Library of practices organized by categories
- User progress tracking and statistics
- Admin panel for content management

## Environment Setup

1. Install dependencies:
```bash
npm install
```

2. Create a `.env.local` file based on `.env.example` with your Supabase credentials

3. Development commands:
```bash
# Start development server with HTTP
npm run dev

# Start development server with HTTPS (required for Telegram mobile)
npm run dev:https 

# Build the project
npm run build

# Lint the code
npm run lint

# Lint and fix issues
npm run lint:fix

# Preview production build
npm run preview
```

## Testing

The project doesn't have a formal testing setup, but you can manually test functionality:

1. Launch with `npm run dev:https`
2. Open the local URL in a browser
3. The app uses mock Telegram environment when running in a browser (configured in `src/mockEnv.ts`)

## Important Project Architecture

### Core Concepts

1. **Telegram Mini App Integration**: The app uses `@telegram-apps/sdk-react` for Telegram integration. User data comes from Telegram's `initData` which is securely validated.

2. **Supabase Database**: All user data, content, and quiz logic is stored in Supabase. Key tables include:
   - `users`: Telegram users information
   - `contents`: Practice content (videos, audio)
   - `categories`: Content categories
   - `content_types`: Types of content
   - `quiz_steps`: Quiz steps and questions
   - `quiz_answers`: Possible quiz answers
   - `quiz_logic`: Logic for recommending content based on quiz answers
   - `user_stats`: User statistics and streaks

3. **Application Flow**:
   - Main Screen ‚Üí Quiz Flow ‚Üí Practice Page
   - Main Screen ‚Üí Library ‚Üí Category/Practice
   - Admin Panel for managing content

4. **Quiz System**: Multi-step questionnaire that filters content based on user preferences:
   - Practice type (body, meditation, breathing)
   - Duration (short, medium, long)
   - Goal (relax, focus, energy, etc.)
   - Approach (guided, self-practice)

5. **Players**: Three player types based on content:
   - Video player (Kinescope)
   - Audio player
   - Timer player (for self-guided meditation)

6. **Realtime Updates**: Uses Supabase Realtime for keeping data synchronized:
   - All Realtime subscriptions include debounce mechanisms to prevent UI flicker
   - Proper cleanup on component unmounting

### File Structure

- `src/components/`: UI components
- `src/contexts/`: React contexts (User, Quiz, Player)
- `src/lib/`: External clients and utilities
  - `supabase/`: Supabase client and hooks
- `src/pages/`: Application pages (Main, Quiz, Library, etc.)
- `src/navigation/`: Routing configuration
- `docs/`: Project documentation
  - `APP_LOGIC_DOCS/`: App flow documentation
  - `lib_docs/`: Library documentation

## Common Development Tasks

### Working with Supabase

The Supabase client is initialized in `src/lib/supabase/client.ts`. When accessing data:

```typescript
// Example: Get user data
const { data, error } = await supabase
  .from('users')
  .select('*')
  .eq('telegram_id', telegramId)
  .single();

// Example: Subscribe to changes
const channel = supabase
  .channel('public:users')
  .on('postgres_changes', { event: '*', schema: 'public', table: 'users' }, callback)
  .subscribe();

// Always unsubscribe when component unmounts
return () => {
  channel.unsubscribe();
};
```

### Adding a New Page

1. Create the page component in `src/pages/`
2. Add the route to `src/navigation/routes.tsx`:

```typescript
// Add to routes array
{ path: '/your-path', Component: YourComponent, title: 'Page Title' },

// Add to router object
{
  path: '/your-path',
  element: <YourComponent />
},
```

### Realtime Data Pattern

When implementing Realtime updates, use the recommended pattern to prevent excessive renders:

```typescript
const channelRef = useRef<RealtimeChannel | null>(null);
const lastUpdateTimeRef = useRef<number>(0);
const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);

useEffect(() => {
  channelRef.current = supabase.channel('my-changes')
    .on('postgres_changes', { event: '*', schema: 'public', table: 'my_table' }, (payload) => {
      const now = Date.now();
      // Ignore updates within 200ms
      if (now - lastUpdateTimeRef.current < 200) return;
      
      if (debounceTimerRef.current) clearTimeout(debounceTimerRef.current);
      debounceTimerRef.current = setTimeout(() => {
        setState(newState);
        debounceTimerRef.current = null;
      }, 300);
      
      lastUpdateTimeRef.current = now;
    })
    .subscribe();

  return () => {
    if (channelRef.current) channelRef.current.unsubscribe();
    if (debounceTimerRef.current) clearTimeout(debounceTimerRef.current);
  };
}, []);
```

### Logging

Use the built-in logger for consistent logging:

```typescript
import { logger } from '@/lib/logger';

logger.info('Info message');
logger.warn('Warning message');
logger.error('Error message', { additionalData: 'value' });
logger.debug('Debug message', { debugData: 'value' }); // Only in development
```

## Important Documentation References

For more details on implementation specifics, refer to:

- `docs/APP_LOGIC_DOCS/main_flow.md`: Main screen flow
- `docs/APP_LOGIC_DOCS/quiz_flow.md`: Quiz implementation
- `docs/APP_LOGIC_DOCS/library_flow.md`: Library structure
- `docs/APP_LOGIC_DOCS/database_schema.md`: Database structure
- `docs/lib_docs/telegram-sdk-integration.md`: Telegram integration

## Development Guidelines

1. **TypeScript**: The project uses strict TypeScript. Ensure all types are properly defined.

2. **Supabase Interactions**: 
   - Always handle loading and error states
   - Use the built-in hooks in `src/lib/supabase/hooks/`
   - Implement proper cleanup for Realtime subscriptions

3. **UI/UX Considerations**:
   - Follow Telegram UI patterns for consistent user experience
   - Support both light and dark themes
   - Ensure proper mobile layout and touch interactions

4. **Performance**:
   - Implement debounce for frequent state updates
   - Use React.memo for frequently re-rendered components
   - Keep Realtime subscriptions minimal and focused

5. **State Management**:
   - Use React Context for global state (UserContext, QuizContext, PlayerContext)
   - Prefer local state for component-specific state
   - Consider using localStorage for persistent preferences

## Environment Variables

The application uses the following environment variables:

- `NEXT_PUBLIC_SUPABASE_URL`: Supabase API URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`: Supabase anonymous key
- `NEXT_PUBLIC_ALLOW_BROWSER_ACCESS`: Allow running in a browser (bypassing Telegram check)
- `VITE_SUPABASE_URL`: Same as `NEXT_PUBLIC_SUPABASE_URL` for Vite
- `VITE_SUPABASE_ANON_KEY`: Same as `NEXT_PUBLIC_SUPABASE_ANON_KEY` for Vite
- `SUPABASE_SERVICE_KEY`: Service key for admin operations
- `NEXT_PUBLIC_CLOUDFLARE_TOKEN`: For Cloudflare R2 storage operations