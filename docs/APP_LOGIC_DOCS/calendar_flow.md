# Календарь событий: Детальное описание флоу

## Общая схема работы календаря

1. **Главная страница календаря**
   - Отображает ближайшие запланированные события
   - Показывает текущий месяц и даты
   - Позволяет переключаться между месяцами
   - Выделяет текущий день и дни с событиями

2. **Типы событий**
   - Запланированные практики
   - Групповые занятия (эфиры)
   - Личные напоминания
   - События сообщества

3. **Взаимодействие с событиями**
   - Просмотр подробной информации о событии
   - Подтверждение участия
   - Настройка напоминаний
   - Добавление событий в личное расписание

## Детальные экраны календаря

### Главный экран календаря
1. **Структура экрана**
   - Заголовок "Календарь"
   - Верхний навигационный бар
   - Нижний таб-бар для переключения между основными разделами

2. **Календарная сетка**
   - Месяц и год в верхней части
   - Дни недели (ПН-ВС)
   - Сетка дней текущего месяца
   - Выделение текущего дня
   - Индикаторы наличия событий на определенные даты

3. **Список ближайших событий**
   - События на выбранный день
   - Краткая информация о каждом событии
   - Время и тип события
   - Возможность быстрого перехода к деталям события

### Экран подробной информации о событии
1. **Структура экрана**
   - Название события ("Эфир" и др.)
   - Дата и время проведения
   - Изображение/превью события
   - Детальное описание

2. **Функциональные элементы**
   - Кнопка подтверждения участия
   - Кнопка добавления напоминания
   - Кнопка перехода к событию (если онлайн)
   - Кнопка возврата к календарю

3. **Дополнительная информация**
   - Количество участников (если применимо)
   - Имя ведущего/инструктора
   - Необходимые материалы или подготовка
   - Продолжительность события

### Фильтр событий
1. **Параметры фильтрации**
   - По типу события (практика, эфир, напоминание)
   - По временному диапазону
   - По ведущему/инструктору
   - По тематике

2. **Сохранение предпочтений**
   - Возможность сохранить выбранные фильтры
   - Быстрое переключение между сохраненными наборами фильтров

## Логика работы с уведомлениями

1. **Типы уведомлений**
   - Напоминание о предстоящем событии (за день)
   - Напоминание непосредственно перед событием (за час/30 минут)
   - Уведомление о новых добавленных событиях
   - Уведомление об изменении расписания

2. **Настройка уведомлений**
   - Выбор времени для напоминаний
   - Включение/отключение определенных типов уведомлений
   - Настройка звука уведомлений

## Логика работы с Supabase

1. **Структура данных**
   - Таблица events для хранения всех событий:
     - id (уникальный идентификатор)
     - title (название события)
     - description (описание)
     - event_type (тип: практика, эфир, напоминание)
     - start_time (время начала)
     - end_time (время окончания)
     - location (место проведения или ссылка)
     - instructor_id (ссылка на ведущего)
     - thumbnail_url (изображение события)
     - is_recurring (повторяющееся или разовое)
     - recurring_pattern (паттерн повторений, если применимо)
     - created_at (дата создания)
     - updated_at (дата обновления)

2. **Пользовательские события**
   - Таблица user_events для связи пользователя с событиями:
     - user_id (id пользователя)
     - event_id (id события)
     - notification_settings (настройки уведомлений)
     - participation_status (статус: подтверждено, под вопросом, отклонено)
     - added_at (дата добавления в календарь)

3. **Запросы к базе данных**
   - Получение событий на определенную дату/период
   - Фильтрация по типам событий
   - Получение деталей конкретного события
   - Обновление статуса участия

## Интеграция с другими разделами

1. **Связь с профилем**
   - Отображение событий в соответствии с предпочтениями пользователя
   - Статистика посещенных событий

2. **Связь с библиотекой**
   - Добавление материалов из библиотеки в календарь для запланированных практик
   - Переход к соответствующим материалам перед событием

3. **Связь с квизом**
   - Рекомендация событий на основе результатов квиза
   - Автоматическое добавление рекомендованных практик в календарь

## Приватность и совместное использование

1. **Настройки приватности**
   - Персональные события (видны только пользователю)
   - Публичные события (видны всем участникам сообщества)
   - Групповые события (видны выбранной группе)

2. **Приглашения**
   - Возможность приглашать других пользователей на события
   - Отслеживание статуса приглашений
   - Уведомления о принятии/отклонении приглашений

## Дополнительные функции

1. **Экспорт и синхронизация**
   - Экспорт событий в формате iCal
   - Синхронизация с Google Calendar / Apple Calendar
   - Возможность получить напоминания по SMS/email

2. **Статистика и аналитика**
   - Отслеживание регулярности практик
   - Визуализация распределения типов событий
   - Рекомендации по оптимизации расписания 