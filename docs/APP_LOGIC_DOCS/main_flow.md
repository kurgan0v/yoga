# Главная страница и основной флоу: Детальное описание

## Общая структура главной страницы

1. **Верхняя панель навигации**
   - Статус-бар устройства
   - Информационная панель с названием раздела
   - Кнопки быстрого доступа к функциям

2. **Основной контент**
   - Блок с рекомендуемой практикой
   - Кнопка "Выбрать практику" (вход в квиз)
   - Блок с текущей статистикой пользователя
   - Блок "Калькулятор" для отслеживания прогресса

3. **Нижняя панель навигации (таб-бар)**
   - Вкладка "Главная"
   - Вкладка "Библиотека"
   - Вкладка "Календарь"
   - Вкладка "Профиль"
   - Индикатор Home для устройств iPhone

## Детальное описание элементов

### Верхняя панель и шапка
1. **Навигационный бар**
   - Статус-бар с информацией об устройстве
   - Название текущего раздела "Главная"
   - Опциональные кнопки управления и уведомлений

2. **Информационный блок**
   - Приветствие пользователя
   - Актуальная информация о прогрессе
   - Краткая статистика использования приложения

### Центральный контент
1. **Блок рекомендуемой практики**
   - Изображение/превью практики
   - Название практики
   - Краткое описание
   - Индикация длительности

2. **Кнопка "Выбрать практику"**
   - Основная кнопка для запуска квиза выбора практики
   - Визуально выделена как ключевое действие
   - При нажатии переход к первому шагу квиза (выбор типа практики)

3. **Блок статистики**
   - Показатели активности пользователя
   - Достижения и прогресс
   - Визуализация регулярности практик

4. **Блок "Калькулятор"**
   - Отслеживание числовых показателей
   - Доступ к истории изменений
   - Визуализация динамики

### Нижняя навигация
1. **Таб-бар**
   - Вкладка "Главная" (текущая)
   - Вкладка "Библиотека" - переход к библиотеке практик
   - Вкладка "Календарь" - переход к расписанию событий
   - Вкладка "Профиль" - переход в личный кабинет
   - Индикатор Home для устройств с жестовой навигацией

## Экран "Выбор практики"

1. **Структура экрана**
   - Заголовок "Выбор практики"
   - Список доступных типов практик
   - Кнопка "Как это работает?" для получения справки
   - Кнопка "Назад" для возврата на главную

2. **Варианты выбора**
   - "До 7 мин" (быстрый выбор)
   - "Телесная практика"
   - "Дыхательная практика"
   - "Медитация"

3. **Информационный экран**
   - Подробное описание процесса выбора практики
   - Объяснение принципов подбора
   - Рекомендации по использованию

## Интеграция с другими разделами

### Взаимодействие с квизом
1. **Переход к процессу выбора**
   - Нажатие на кнопку "Выбрать практику" запускает квиз
   - Сохранение предыдущих выборов пользователя
   - Возможность вернуться на главную в любой момент

2. **Получение результатов**
   - После завершения квиза результат отображается на главной
   - Предложение сразу перейти к выбранной практике
   - Сохранение результата в истории

### Взаимодействие с библиотекой
1. **Отображение рекомендаций**
   - На главной показываются релевантные материалы из библиотеки
   - Быстрый доступ к популярным или недавним практикам
   - Персонализированные предложения

### Взаимодействие с календарем
1. **Отображение событий**
   - Предстоящие события показываются на главной
   - Напоминания о запланированных практиках
   - Быстрый доступ к ближайшим мероприятиям

### Взаимодействие с профилем
1. **Персонализация контента**
   - Контент главной страницы адаптируется под пользователя
   - Отображение статистики из профиля
   - Поздравления с достижениями

## Логика работы с Supabase

1. **Получение данных для главной**
   - Запрос персональных рекомендаций для пользователя
   - Получение статистики использования
   - Загрузка информации о прогрессе

2. **Логирование взаимодействий**
   - Запись активности пользователя
   - Отслеживание времени использования
   - Сохранение предпочтений

3. **Структура таблиц**
   - Таблица recommendations для персонализированных рекомендаций:
     - user_id (связь с пользователем)
     - material_id (связь с практикой)
     - recommendation_type (тип рекомендации)
     - reason (причина рекомендации)
     - created_at (время создания)
   
   - Таблица user_stats для статистики:
     - user_id (связь с пользователем)
     - total_practice_time (общее время практик)
     - practice_count (количество практик)
     - last_practice_date (дата последней практики)
     - streak (серия дней с практикой)
     - longest_streak (самая длинная серия)

## Навигационная логика

1. **Стартовый экран**
   - При первом запуске - онбординг и авторизация
   - При повторных запусках - главная страница
   - Проверка наличия уведомлений или важных событий

2. **Навигация между разделами**
   - Таб-бар позволяет быстро переключаться между основными разделами
   - Вложенные экраны доступны через соответствующие кнопки
   - Возможность вернуться на главную из любого раздела

3. **Жестовая навигация**
   - Свайп влево/вправо для перемещения между связанными экранами
   - Свайп вниз для обновления контента
   - Индикатор Home для возврата на домашний экран устройства

## Фоновые процессы

1. **Обновление данных**
   - Периодическая синхронизация с сервером
   - Получение новых рекомендаций
   - Обновление статистики

2. **Кеширование**
   - Локальное хранение часто используемых данных
   - Предзагрузка потенциально релевантного контента
   - Оптимизация скорости работы приложения

3. **Уведомления**
   - Получение и отображение системных уведомлений
   - Напоминания о запланированных практиках
   - Информирование о новом контенте 